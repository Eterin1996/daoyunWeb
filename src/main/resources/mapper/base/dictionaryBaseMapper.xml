<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//ibatis.apache.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.dao.base.dictionaryBaseMapper">


    <insert id="insertdictionary" >
        INSERT INTO `dictionary`
        (
        <trim suffixOverrides=",">
                    <if test="DicId!=null">
                        `DicId`,
                    </if>
                    <if test="DicName!=null">
                        `DicName`,
                    </if>
                    <if test="DicDescription!=null">
                        `DicDescription`,
                    </if>
                    <if test="Code!=null">
                        `Code`,
                    </if>
        </trim>
        )
        VALUES
        (
        <trim suffixOverrides=",">
                <if test="DicId!=null">
                    #{DicId},
                </if>
                <if test="DicName!=null">
                    #{DicName},
                </if>
                <if test="DicDescription!=null">
                    #{DicDescription},
                </if>
                <if test="Code!=null">
                    #{Code},
                </if>
        </trim>
        )
    </insert>




    <update id="updatedictionary">
        UPDATE `dictionary`
        SET
        <trim suffixOverrides=",">
            <if test="DicName != null and DicName!=''">
                `DicName` = #{DicName},
            </if>
            <if test="DicDescription != null and DicDescription!=''">
                `DicDescription` = #{DicDescription},
            </if>
            <if test="Code != null and Code!=''">
                `Code` = #{Code},
            </if>
        </trim>
        WHERE
        <trim suffixOverrides="and">
                `DicId` = #{DicId} and
        </trim>
    </update>

    <update id="update">
        UPDATE `dictionary`
        SET
        <trim suffixOverrides=",">
        <if test="set.DicName != null and set.DicName!=''">
            `DicName` = #{set.DicName},
        </if>
        <if test="set.DicDescription != null and set.DicDescription!=''">
            `DicDescription` = #{set.DicDescription},
        </if>
        <if test="set.Code != null and set.Code!=''">
            `Code` = #{set.Code},
        </if>
        </trim>
        <trim prefix="where" suffixOverrides="and | or">
                <if test="where.DicIdList != null">
                    `DicId` in
                    <foreach collection="where.DicIdList" close=")" open="(" separator="," item="item">
                        #{item}
                    </foreach> and
                </if>
            <if test="where.DicIdSt !=null">
                `DicId` >= #{where.DicIdSt} and
            </if>
            <if test="where.DicIdEd!=null">
                `DicId` &lt;= #{where.DicIdEd} and
            </if>
                <if test="where.DicNameList != null">
                    `DicName` in
                    <foreach collection="where.DicNameList" close=")" open="(" separator="," item="item">
                        #{item}
                    </foreach> and
                </if>
            <if test ="where.fuzzyDicName!=null and where.fuzzyDicName.size()>0">
                (
                <foreach collection="where.fuzzyDicName"  separator="or" item="item">
                    `DicName` like concat('%',#{item},'%')
                </foreach>
                ) and
            </if>
            <if test ="where.rightFuzzyDicName!=null and where.rightFuzzyDicName.size()>0">
                (
                <foreach collection="where.rightFuzzyDicName"  separator="or" item="item">
                    `DicName` like concat(#{item},'%')
                </foreach>
                ) and
            </if>
                <if test="where.DicDescriptionList != null">
                    `DicDescription` in
                    <foreach collection="where.DicDescriptionList" close=")" open="(" separator="," item="item">
                        #{item}
                    </foreach> and
                </if>
            <if test ="where.fuzzyDicDescription!=null and where.fuzzyDicDescription.size()>0">
                (
                <foreach collection="where.fuzzyDicDescription"  separator="or" item="item">
                    `DicDescription` like concat('%',#{item},'%')
                </foreach>
                ) and
            </if>
            <if test ="where.rightFuzzyDicDescription!=null and where.rightFuzzyDicDescription.size()>0">
                (
                <foreach collection="where.rightFuzzyDicDescription"  separator="or" item="item">
                    `DicDescription` like concat(#{item},'%')
                </foreach>
                ) and
            </if>
                <if test="where.CodeList != null">
                    `Code` in
                    <foreach collection="where.CodeList" close=")" open="(" separator="," item="item">
                        #{item}
                    </foreach> and
                </if>
            <if test ="where.fuzzyCode!=null and where.fuzzyCode.size()>0">
                (
                <foreach collection="where.fuzzyCode"  separator="or" item="item">
                    `Code` like concat('%',#{item},'%')
                </foreach>
                ) and
            </if>
            <if test ="where.rightFuzzyCode!=null and where.rightFuzzyCode.size()>0">
                (
                <foreach collection="where.rightFuzzyCode"  separator="or" item="item">
                    `Code` like concat(#{item},'%')
                </foreach>
                ) and
            </if>
        </trim>
    </update>


    <resultMap type="com.utils.dictionary" id="dictionaryMap">
        <result property="DicId" column="DicId"/>
        <result property="DicName" column="DicName"/>
        <result property="DicDescription" column="DicDescription"/>
        <result property="Code" column="Code"/>
    </resultMap>


    <select id="querydictionary" resultMap="dictionaryMap">
        select
        <include refid="baseResult"></include>
        from  `dictionary`
        <trim prefix="where" suffixOverrides="and | or">
            <if test="DicId != null">
                `DicId` = #{DicId} and
            </if>
            <if test="DicName != null and DicName!=''">
                `DicName` = #{DicName} and
            </if>
            <if test="DicDescription != null and DicDescription!=''">
                `DicDescription` = #{DicDescription} and
            </if>
            <if test="Code != null and Code!=''">
                `Code` = #{Code} and
            </if>
            <if test = "(_parameter instanceof com.utils.dictionary$QueryBuilder) == true">
                <if test="DicIdList != null">
                    `DicId` in
                    <foreach collection="DicIdList" close=")" open="(" separator="," item="item">
                        #{item}
                    </foreach> and
                </if>
                <if test="DicIdSt !=null">
                    `DicId` >= #{DicIdSt} and
                </if>
                <if test="DicIdEd!=null">
                    `DicId` &lt;= #{DicIdEd} and
                </if>
                <if test="DicNameList != null">
                    `DicName` in
                    <foreach collection="DicNameList" close=")" open="(" separator="," item="item">
                        #{item}
                    </foreach> and
                </if>
                <if test ="fuzzyDicName!=null and fuzzyDicName.size()>0">
                    (
                    <foreach collection="fuzzyDicName"  separator="or" item="item">
                        `DicName` like concat('%',#{item},'%')
                    </foreach>
                    ) and
                </if>
                <if test ="rightFuzzyDicName!=null and rightFuzzyDicName.size()>0">
                    (
                    <foreach collection="rightFuzzyDicName"  separator="or" item="item">
                        `DicName` like concat(#{item},'%')
                    </foreach>
                    ) and
                </if>
                <if test="DicDescriptionList != null">
                    `DicDescription` in
                    <foreach collection="DicDescriptionList" close=")" open="(" separator="," item="item">
                        #{item}
                    </foreach> and
                </if>
                <if test ="fuzzyDicDescription!=null and fuzzyDicDescription.size()>0">
                    (
                    <foreach collection="fuzzyDicDescription"  separator="or" item="item">
                        `DicDescription` like concat('%',#{item},'%')
                    </foreach>
                    ) and
                </if>
                <if test ="rightFuzzyDicDescription!=null and rightFuzzyDicDescription.size()>0">
                    (
                    <foreach collection="rightFuzzyDicDescription"  separator="or" item="item">
                        `DicDescription` like concat(#{item},'%')
                    </foreach>
                    ) and
                </if>
                <if test="CodeList != null">
                    `Code` in
                    <foreach collection="CodeList" close=")" open="(" separator="," item="item">
                        #{item}
                    </foreach> and
                </if>
                <if test ="fuzzyCode!=null and fuzzyCode.size()>0">
                    (
                    <foreach collection="fuzzyCode"  separator="or" item="item">
                        `Code` like concat('%',#{item},'%')
                    </foreach>
                    ) and
                </if>
                <if test ="rightFuzzyCode!=null and rightFuzzyCode.size()>0">
                    (
                    <foreach collection="rightFuzzyCode"  separator="or" item="item">
                        `Code` like concat(#{item},'%')
                    </foreach>
                    ) and
                </if>
            </if>
        </trim>
    </select>

    <select id="querydictionaryLimit1" resultMap="dictionaryMap">
        select
        <include refid="baseResult"></include>
        from  `dictionary`
        <trim prefix="where" suffixOverrides="and | or">
            <if test="DicId != null">
                `DicId` = #{DicId} and
            </if>
            <if test="DicName != null and DicName!=''">
                `DicName` = #{DicName} and
            </if>
            <if test="DicDescription != null and DicDescription!=''">
                `DicDescription` = #{DicDescription} and
            </if>
            <if test="Code != null and Code!=''">
                `Code` = #{Code} and
            </if>
            <if test = "(_parameter instanceof com.utils.dictionary$QueryBuilder) == true">
                    <if test="DicIdList != null">
                        `DicId` in
                        <foreach collection="DicIdList" close=")" open="(" separator="," item="item">
                            #{item}
                        </foreach> and
                    </if>
                <if test="DicIdSt !=null">
                    `DicId` >= #{DicIdSt} and
                </if>
                <if test="DicIdEd!=null">
                    `DicId` &lt;= #{DicIdEd} and
                </if>
                    <if test="DicNameList != null">
                        `DicName` in
                        <foreach collection="DicNameList" close=")" open="(" separator="," item="item">
                            #{item}
                        </foreach> and
                    </if>
                <if test ="fuzzyDicName!=null and fuzzyDicName.size()>0">
                    (
                    <foreach collection="fuzzyDicName"  separator="or" item="item">
                        `DicName` like concat('%',#{item},'%')
                    </foreach>
                    ) and
                </if>
                <if test ="rightFuzzyDicName!=null and rightFuzzyDicName.size()>0">
                    (
                    <foreach collection="rightFuzzyDicName"  separator="or" item="item">
                        `DicName` like concat(#{item},'%')
                    </foreach>
                    ) and
                </if>
                    <if test="DicDescriptionList != null">
                        `DicDescription` in
                        <foreach collection="DicDescriptionList" close=")" open="(" separator="," item="item">
                            #{item}
                        </foreach> and
                    </if>
                <if test ="fuzzyDicDescription!=null and fuzzyDicDescription.size()>0">
                    (
                    <foreach collection="fuzzyDicDescription"  separator="or" item="item">
                        `DicDescription` like concat('%',#{item},'%')
                    </foreach>
                    ) and
                </if>
                <if test ="rightFuzzyDicDescription!=null and rightFuzzyDicDescription.size()>0">
                    (
                    <foreach collection="rightFuzzyDicDescription"  separator="or" item="item">
                        `DicDescription` like concat(#{item},'%')
                    </foreach>
                    ) and
                </if>
                    <if test="CodeList != null">
                        `Code` in
                        <foreach collection="CodeList" close=")" open="(" separator="," item="item">
                            #{item}
                        </foreach> and
                    </if>
                <if test ="fuzzyCode!=null and fuzzyCode.size()>0">
                    (
                    <foreach collection="fuzzyCode"  separator="or" item="item">
                        `Code` like concat('%',#{item},'%')
                    </foreach>
                    ) and
                </if>
                <if test ="rightFuzzyCode!=null and rightFuzzyCode.size()>0">
                    (
                    <foreach collection="rightFuzzyCode"  separator="or" item="item">
                        `Code` like concat(#{item},'%')
                    </foreach>
                    ) and
                </if>
            </if>
        </trim>
        limit 1
    </select>

    <sql id="allResult">
        <trim suffixOverrides=",">
        `DicId`,
        `DicName`,
        `DicDescription`,
        `Code`,
        </trim>
    </sql>



    <sql id="baseResult">
        <trim suffixOverrides=",">
            <if test = "(_parameter instanceof com.utils.dictionary$QueryBuilder) == true">

                <if test="fetchFields==null">
                    <include refid="allResult"></include>
                </if>
                <if test="fetchFields!=null">
                    <if test="fetchFields.AllFields !=null">
                        <include refid="allResult"></include>
                    </if>
                    <if test="fetchFields.AllFields ==null and fetchFields.fetchFields==null and fetchFields.excludeFields==null and fetchFields.otherFields==null">
                        <include refid="allResult"></include>
                    </if>
                    <if test="fetchFields.AllFields==null and fetchFields.fetchFields!=null">
                    <if test="fetchFields.fetchFields.DicId==true">
                        `DicId`,
                    </if>
                    <if test="fetchFields.fetchFields.DicName==true">
                        `DicName`,
                    </if>
                    <if test="fetchFields.fetchFields.DicDescription==true">
                        `DicDescription`,
                    </if>
                    <if test="fetchFields.fetchFields.Code==true">
                        `Code`,
                    </if>
                    </if>
                    <if test="fetchFields.AllFields==null and fetchFields.excludeFields!=null">
                    <if test="fetchFields.excludeFields.DicId==null">
                        `DicId`,
                    </if>
                    <if test="fetchFields.excludeFields.DicName==null">
                        `DicName`,
                    </if>
                    <if test="fetchFields.excludeFields.DicDescription==null">
                        `DicDescription`,
                    </if>
                    <if test="fetchFields.excludeFields.Code==null">
                        `Code`,
                    </if>
                    </if>
                    <if test="fetchFields.otherFields!=null and fetchFields.otherFields.size>0">
                        <foreach collection="fetchFields.otherFields" index="index" item="item" separator=",">
                        `#{item}`
                        </foreach>
                    </if>
                </if>
            </if>
            <if test="(_parameter instanceof com.utils.dictionary$QueryBuilder) == false" >
                <include refid="allResult"></include>
            </if>

        </trim>
    </sql>


</mapper>